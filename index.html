<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Seni Seviyorum</title>

<style>
body {
  margin: 0;
  background: #ffe6f0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

canvas {
  background: transparent;
}

.overlay {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: none;
}

.msg {
  padding: 20px 30px;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
  color: #7a0026;
  font-size: 32px;
  font-weight: 800;
  text-align: center;
  line-height: 1.4;
  animation: fadeIn 1s ease;
}

.fade-out {
  animation: fadeOut 0.8s ease forwards;
}

@keyframes fadeOut {
  to { opacity: 0; transform: translateY(-20px); }
}
</style>
</head>

<body>

<div class="overlay" id="overlay">
  <div class="msg" id="messageBox"></div>
</div>

<canvas id="canvas" width="650" height="650"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const overlay = document.getElementById("overlay");
const messageBox = document.getElementById("messageBox");

// === MESAJ AYARI ===
const urlParams = new URLSearchParams(window.location.search);
const messageText =
  urlParams.get("msg") ||
  "2025'in kattÄ±ÄŸÄ± en gÃ¼zel ÅŸey sensin\nseni Ã§ok seviyorum ðŸ’–";

// MesajÄ± satÄ±rlara bÃ¶l
messageBox.innerHTML = messageText
  .split("\n")
  .map(line => `<div>${line}</div>`)
  .join("");

// === KALP ANÄ°MASYONU ===
const SCALE = 16;
const CENTER_X = canvas.width / 2;
const CENTER_Y = canvas.height / 2 + 40;

let t = 0;
let points = [];
let phase = "intro";

function heart(t) {
  return {
    x: 16 * Math.pow(Math.sin(t), 3),
    y:
      13 * Math.cos(t) -
      5 * Math.cos(2 * t) -
      2 * Math.cos(3 * t) -
      Math.cos(4 * t)
  };
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.save();
  ctx.translate(CENTER_X, CENTER_Y);

  ctx.beginPath();
  for (let i = 0; i < points.length; i++) {
    const p = points[i];
    if (i === 0) ctx.moveTo(p.x * SCALE, -p.y * SCALE);
    else ctx.lineTo(p.x * SCALE, -p.y * SCALE);
  }

  ctx.strokeStyle = "#d6003b";
  ctx.lineWidth = 3;
  ctx.lineCap = "round";
  ctx.stroke();

  if (phase === "done") {
    ctx.font = "800 34px 'Comic Sans MS', cursive";
    ctx.fillStyle = "#800020";
    ctx.textAlign = "center";
    ctx.fillText("seni seviyorum", 0, 20);
    ctx.font = "800 28px 'Comic Sans MS', cursive";
    ctx.fillText("iyi ki varsÄ±n", 0, 60);
  }

  ctx.restore();
}

function animate() {
  if (phase === "drawing") {
    if (t < Math.PI * 2) {
      points.push(heart(t));
      t += 0.045;
    } else {
      phase = "done";
    }
  }

  draw();
  requestAnimationFrame(animate);
}

setTimeout(() => {
  overlay.classList.add("fade-out");
  setTimeout(() => {
    overlay.style.display = "none";
    phase = "drawing";
  }, 700);
}, 3000);

requestAnimationFrame(animate);
</script>

</body>
</html>